<!DOCTYPE html>
<html lang="en">
    <head>
        <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
        <meta
        content="text/html; charset=utf-8" http-equiv="content-type"/> <!-- Enable responsiveness on mobile devices-->
        <meta content="width=device-width, initial-scale=1.0, maximum-scale=1" name="viewport"/>
        <title>
            
    Mini Bytes on Technology - What is Micro Averaged F1 Score

        </title>
        <link href="https://blog.akhildevelops.co.in/favicon.ico" rel="icon" type="image/x-icon"/>
        
            <link rel="alternate" type= "application/atom+xml"  title="RSS" href="https://blog.akhildevelops.co.in/atom.xml"/>
        
        
        
    <meta content="website" property="og:type"/>
    <meta content="Mini Bytes on Technology" property="og:site_name"/>
    <meta content="https://blog.akhildevelops.co.in/blog/micro-average-f1/" property="og:url"/>
    <meta content="https://blog.akhildevelops.co.in/blog/micro-average-f1/" property="twitter:url"/>
    
        <meta content="What is Micro Averaged F1 Score" property="og:title"/>
        <meta content="What is Micro Averaged F1 Score" property="twitter:title"/>
    
    
        <meta content="How can we calculate f1 score of a model for multiple classes?" property="description"/>
        <meta content="How can we calculate f1 score of a model for multiple classes?" property="og:description"/>
        <meta content="How can we calculate f1 score of a model for multiple classes?" property="twitter:description"/>
    
    
        <meta content="summary_large_image" property="twitter:card"/>
        <meta content="https://blog.akhildevelops.co.inthumbnail.png" property="og:image"/>
        <meta content="https://blog.akhildevelops.co.inthumbnail.png" property="twitter:image"/>
    

        
        
            <script src="https://blog.akhildevelops.co.in/slideout.min.js" type="text/javascript"></script>
            
        
        
            <link href="https://blog.akhildevelops.co.in/site.css" rel="stylesheet"/>
            <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet"/>
            <link charset="utf-8" href="https://indestructibletype.com/fonts/Jost.css" rel="stylesheet" type="text/css"/>
            <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
            
        
        
    </head>
    <body>
        <script>
            (function initTheme() {
                let body = document.getElementsByTagName("body")[0];
                if (window.localStorage.getItem("theme") !== null) {
                    if (window.localStorage.getItem("theme") === "dark") {
                        body.setAttribute("data-theme", "dark");
                    } else {
                        body.setAttribute("data-theme", "light");
                    }
                } else {
                    if (window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches) {
                        body.setAttribute("data-theme", "light");
                    }
                }
            })();
        </script>
        <div class="container">
            <div class="mobile-navbar" id="mobile-navbar">
                <div class="mobile-header-logo">
                    <a class="logo" href="https:&#x2F;&#x2F;blog.akhildevelops.co.in">Mini Bytes on Technology</a>
                </div>
                <div class="mobile-navbar-icon icon-out">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
            <nav class="mobile-menu slideout-menu slideout-menu-left" id="mobile-menu">
                <ul class="mobile-menu-list">
                    
                        <li class="mobile-menu-item">
                            <a href="https:&#x2F;&#x2F;blog.akhildevelops.co.in&#x2F;blog">
                                Blog
                            </a>
                        </li>
                    
                        <li class="mobile-menu-item">
                            <a href="https:&#x2F;&#x2F;blog.akhildevelops.co.in&#x2F;categories">
                                Categories
                            </a>
                        </li>
                    
                        <li class="mobile-menu-item">
                            <a href="https:&#x2F;&#x2F;blog.akhildevelops.co.in&#x2F;tags">
                                Tags
                            </a>
                        </li>
                    
                        <li class="mobile-menu-item">
                            <a href="https:&#x2F;&#x2F;blog.akhildevelops.co.in&#x2F;about">
                                MyProfile
                            </a>
                        </li>
                    
                    <li class="mobile-menu-item">
                        <div class="theme-switcher">
                            
    <div class="theme-button" onClick="toggleTheme()">
        <label for="cb1">
            <svg
                id="dayIcon"
                style="enable-background:new 0 0 35 35;"
                version="1.1"
                viewBox="0 0 35 35"
                x="0px"
                xml:space="preserve"
                xmlns:xlink="http://www.w3.org/1999/xlink"
                xmlns="http://www.w3.org/2000/svg"
                y="0px">
                <g id="Sun">
                    <g>
                        <path
                            d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5 S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z
                                M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5
                                C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6
                                C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9
                                c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44
                                l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5
                                c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06 L6.439,8.561z
                                M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z
                                M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2
                                C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29
                                c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7
                                C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5
                                c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"
                            style="fill-rule:evenodd;clip-rule:evenodd;"/>
                    </g>
                </g>
            </svg>
        </label>
        <input class="toggle" id="cb1" onClick="toggleTheme()" type="checkbox"/>
        <label class="toggle-button" for="cb1"></label>
        <label for="cb1">
            <svg
                enable-background="new 0 0 100 100"
                id="nightIcon"
                version="1.1"
                viewBox="0 0 100 100"
                x="0px"
                xml:space="preserve"
                xmlns:xlink="http://www.w3.org/1999/xlink"
                xmlns="http://www.w3.org/2000/svg"
                y="0px">
                <path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571
                C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23
                c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369
                c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65 c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"/>
            </svg>
        </label>
    </div>

                        </div>
                    </li>
                </ul>
            </nav>
            
                
    <header id="header">
        <div class="logo">
            <a href="https:&#x2F;&#x2F;blog.akhildevelops.co.in">Mini Bytes on Technology</a>
        </div>
        
    <nav class="menu">
        <ul>
            
                <li>
                    <a href="https:&#x2F;&#x2F;blog.akhildevelops.co.in&#x2F;blog">
                        Blog
                    </a>
                </li>
            
                <li>
                    <a href="https:&#x2F;&#x2F;blog.akhildevelops.co.in&#x2F;categories">
                        Categories
                    </a>
                </li>
            
                <li>
                    <a href="https:&#x2F;&#x2F;blog.akhildevelops.co.in&#x2F;tags">
                        Tags
                    </a>
                </li>
            
                <li>
                    <a href="https:&#x2F;&#x2F;blog.akhildevelops.co.in&#x2F;about">
                        MyProfile
                    </a>
                </li>
            
            <div class="theme-switcher">
                
    <div class="theme-button" onClick="toggleTheme()">
        <label for="cb1">
            <svg
                id="dayIcon"
                style="enable-background:new 0 0 35 35;"
                version="1.1"
                viewBox="0 0 35 35"
                x="0px"
                xml:space="preserve"
                xmlns:xlink="http://www.w3.org/1999/xlink"
                xmlns="http://www.w3.org/2000/svg"
                y="0px">
                <g id="Sun">
                    <g>
                        <path
                            d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5 S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z
                                M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5
                                C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6
                                C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9
                                c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44
                                l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5
                                c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06 L6.439,8.561z
                                M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z
                                M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2
                                C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29
                                c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7
                                C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5
                                c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"
                            style="fill-rule:evenodd;clip-rule:evenodd;"/>
                    </g>
                </g>
            </svg>
        </label>
        <input class="toggle" id="cb1" onClick="toggleTheme()" type="checkbox"/>
        <label class="toggle-button" for="cb1"></label>
        <label for="cb1">
            <svg
                enable-background="new 0 0 100 100"
                id="nightIcon"
                version="1.1"
                viewBox="0 0 100 100"
                x="0px"
                xml:space="preserve"
                xmlns:xlink="http://www.w3.org/1999/xlink"
                xmlns="http://www.w3.org/2000/svg"
                y="0px">
                <path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571
                C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23
                c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369
                c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65 c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"/>
            </svg>
        </label>
    </div>

            </div>
        </ul>
    </nav>

    </header>

            
            <main>
                <div class="content" id="mobile-panel"> 
    
        <div class="post-toc" id="post-toc">
            <div class="toc-wrapper">
                <h2 class="post-toc-title">Contents</h2>
                <div class="post-toc-content always-active">
                    <nav id="TableOfContents">
                        <ul>
                            
                                <li>
                                    <a class="toc-link" href="https://blog.akhildevelops.co.in/blog/micro-average-f1/#f1-score">F1 Score</a>
                                    
                                </li>
                            
                                <li>
                                    <a class="toc-link" href="https://blog.akhildevelops.co.in/blog/micro-average-f1/#precision">Precision</a>
                                    
                                </li>
                            
                                <li>
                                    <a class="toc-link" href="https://blog.akhildevelops.co.in/blog/micro-average-f1/#recall">Recall</a>
                                    
                                </li>
                            
                                <li>
                                    <a class="toc-link" href="https://blog.akhildevelops.co.in/blog/micro-average-f1/#macro-averaged-f1-score">Macro Averaged F1-Score</a>
                                    
                                </li>
                            
                                <li>
                                    <a class="toc-link" href="https://blog.akhildevelops.co.in/blog/micro-average-f1/#micro-averaged-f1-score">Micro Averaged F1-Score</a>
                                    
                                </li>
                            
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    
    <article class="post">
        
    <header class="post__header">
        <h1 class="post__title">
            <a href="https:&#x2F;&#x2F;blog.akhildevelops.co.in&#x2F;blog&#x2F;micro-average-f1&#x2F;">What is Micro Averaged F1 Score</a>
        </h1>
        <div class="post__meta">
            <span class="post__time">2021-09-28</span>
            
                <div class="post__category">
                    
                        <a href="https://blog.akhildevelops.co.in/categories/machine-learning/">Machine Learning</a>
                    
                        <a href="https://blog.akhildevelops.co.in/categories/deep-learning/">Deep Learning</a>
                    
                </div>
            
        </div>
    </header>

        <div class="post-content">
            <div class="cover-image">
  <img src="thumbnail.png"/>
  <p class="desc">
    Confusion Matrix
  </p>
</div><h4 id="f1-score">F1 Score</h4>
<p>F1 Score is harmonic mean of Precision and Recall.</p>
<p><img src="https://svgshare.com/i/M7d.svg" alt="F1 Score" /></p>
<h4 id="precision">Precision</h4>
<p>It tells you how weak is your model in predicting positive Classes. If number of False Positives are more than True Positives then your model has less precision.</p>
<h4 id="recall">Recall</h4>
<p>It tells you how weak is your model in covering True Classes. If number of False Negatives are more than True Positives then your model has less recall.</p>
<p>For more info on Precision and Recall, <a href="https://towardsdatascience.com/multi-class-metrics-made-simple-part-i-precision-and-recall-9250280bddc2">Click Here</a></p>
<ul>
<li>F1-Score can be easily calculated for a binary classification Problem.</li>
<li>What if we have multi-class classification ? How can we calculate F1-Score and if calculated for each label how can we merge / consolidate them ?</li>
</ul>
<p>Let's try to address these questions by considering an Example:</p>
<p>We have a dataset of 3 Labels Cat, Dog and Fish. We have built a multi-class classifier that predicts one label among these 3 labels and let's consider below as the the outputs for each Label. (One vs All)</p>
<p>The above values can be represented as below confusion Matrix:</p>
<p><img src="https://i.ibb.co/swZrksj/Screenshot-from-2020-06-17-14-13-01.png" alt="Confusion Matrix" /></p>
<p>From the above table we can deduce the following for each Label:</p>
<table><thead><tr><th>Animals</th><th>TP</th><th>FP</th><th>FN</th></tr></thead><tbody>
<tr><td>Cat</td><td>10</td><td>15</td><td>13</td></tr>
<tr><td>Dog</td><td>20</td><td>11</td><td>12</td></tr>
<tr><td>Fish</td><td>13</td><td>12</td><td>13</td></tr>
</tbody></table>
<p>Now F-1 Score for each label can be calculated by calculating individual Precisions and Recalls by</p>
<p>Precision = T.P / (T.P + F.P)
Recall = T.P / (T.P + F.N)</p>
<p>Ex: For Cat we have the following:
Precision = 10 / (10+15) = 0.4
Recall = 10 / (10+13) = 0.43</p>
<p>Therefore F1-Score for <strong>Cat is 0.414</strong></p>
<p>Similarly F1-Scores for other labels are <strong>Dog: 0.635, Fish: 0.51</strong></p>
<p>We acheived F1 Scores for independent Labels. How can we aggregate these F1-Scores into a single F1-Score for evaluating the Model ?</p>
<p>We have two type of Aggregations:
<strong>Macro Averaged F1-Score and Micro-Averaged F1-Score</strong></p>
<h4 id="macro-averaged-f1-score">Macro Averaged F1-Score</h4>
<p>Here we simple average all the F1-Scores and calculate a mean F1-Score.</p>
<p>Average of all the F1-Scores result in <strong>0.52</strong></p>
<p>But simply averaging all the F1-Scores isn't a fair way to estimate a model perfomance. Because this metric doesn't perform good on imbalanced dataset. A good explaination on the same can be <a href="https://datascience.stackexchange.com/questions/15989/micro-average-vs-macro-average-performance-in-a-multiclass-classification-settin">found here</a></p>
<h4 id="micro-averaged-f1-score">Micro Averaged F1-Score</h4>
<p>Here instead of calculating each label's F1-Score, we derive the F1-Score by calculating Precision and Recall by summing all the TPs and Type Errors instead of calculating for each Label:</p>
<pre data-lang="python" style="background-color:#2b2c2f;color:#cccece;" class="language-python "><code class="language-python" data-lang="python"><span>Total T</span><span style="color:#5fb3b3;">.</span><span>Ps </span><span style="color:#5fb3b3;">= </span><span style="color:#f99157;">10</span><span style="color:#5fb3b3;">+</span><span style="color:#f99157;">20</span><span style="color:#5fb3b3;">+</span><span style="color:#f99157;">13 </span><span style="color:#5fb3b3;">= </span><span style="color:#f99157;">43
</span><span>Total F</span><span style="color:#5fb3b3;">.</span><span>Ps </span><span style="color:#5fb3b3;">= </span><span style="color:#f99157;">15</span><span style="color:#5fb3b3;">+</span><span style="color:#f99157;">11</span><span style="color:#5fb3b3;">+</span><span style="color:#f99157;">12 </span><span style="color:#5fb3b3;">= </span><span style="color:#f99157;">38
</span><span>Total F</span><span style="color:#5fb3b3;">.</span><span>Ns </span><span style="color:#5fb3b3;">= </span><span style="color:#f99157;">13</span><span style="color:#5fb3b3;">+</span><span style="color:#f99157;">12</span><span style="color:#5fb3b3;">+</span><span style="color:#f99157;">13 </span><span style="color:#5fb3b3;">= </span><span style="color:#f99157;">39
</span><span>
</span><span>Precision </span><span style="color:#5fb3b3;">= </span><span style="color:#f99157;">43</span><span style="color:#5fb3b3;">/(</span><span style="color:#f99157;">43</span><span style="color:#5fb3b3;">+</span><span style="color:#f99157;">38</span><span style="color:#5fb3b3;">) = </span><span style="color:#f99157;">0</span><span style="color:#5fb3b3;">.</span><span style="color:#f99157;">53
</span><span>Recall </span><span style="color:#5fb3b3;">= </span><span style="color:#f99157;">0</span><span style="color:#5fb3b3;">.</span><span style="color:#f99157;">524
</span><span>
</span><span>F1</span><span style="color:#5fb3b3;">-</span><span>Score </span><span style="color:#5fb3b3;">= </span><span style="color:#f99157;">0</span><span style="color:#5fb3b3;">.</span><span style="color:#f99157;">526
</span></code></pre>
<p>Micro Averaged f1 score is one of the metric to be used for validation of multi-class classifier.</p>
<p>Scikitlearn offers computation of micro average f1 score on the fly through the function <a href="https://scikit-learn.org/stable/modules/generated/sklearn.metrics.f1_score.html"><code>sklearn.metrics.f1_score</code></a></p>

        </div>
        
        <!-- <div
            class="end-post">
        </div> -->
        <div class="post-footer">
            
                
                    <div class="post-tags">
                        
                            <a href="https://blog.akhildevelops.co.in/tags/f1-score/">
                                <span class="hashtag">#</span>
                                f1-score</a>
                        
                            <a href="https://blog.akhildevelops.co.in/tags/scoring/">
                                <span class="hashtag">#</span>
                                scoring</a>
                        
                    </div>
                
                
                


            
        </div>
        
    </article>

                    
                        <footer>
                            <div class="copyright">
                                &#169;<script>
                                    document.write(new Date().getFullYear());
                                </script>
                                Akhil
                            </div>
                            <div class="made-with">
                                Made with
                                <a href="https://www.getzola.org/" rel="noopener noreferrer" target="_blank">Zola</a>,
                                <a href="https://github.com/xypnox/blag/tree/master/themes/xyblag" rel="noopener noreferrer" target="_blank">Theme</a>
                                by
                                <a href="https://www.xypnox.com/" rel="noopener noreferrer" target="_blank">xypnox</a>.
                            </div>
                        </footer>
                    
                </div>
            </main>
        </div>
        
            <script src="https://blog.akhildevelops.co.in/main.js" type="text/javascript"></script>
        
    </body>
</html>